<!-- Starter code for Assignment 2 -->
<html>
<head>
<script src = "vector2d.js"></script>
<script src = "geom2d.js"></script>
<script src = "physics2d.js"></script>
</head>
<body>
<!-- Here put your pseudocode as a nicely formatted html text -->
<h1> Pseudocode </h1>
<ul>
<li>Determine all 4 vertices of rectangle</li>
<ul>
<li>We have 2 points (A,B) and (C,D) which we know are along the rectangles diagonal.</li>
<li>This means the other two points are (A,D) and (C,B). Store those.</li>
</ul>
<li>Using vertices determine if there will BE a collision</li>
<ul>
<li>Find the closest vertice to circles origin</li>
<li>Using this shared vertice and the 2 adjoining vertices we construct 2 "walls"</li>
<li>Find normal n for each</li>
<li>Find a which is wal.startPoint - cir.pos for each</li>
<li>Find c which is dotProduct(a, n)</li>
<li>if abs(c) &lt cir.radius then we are already colliding</li>
<li>if nearest vertice is moving away from circle, there will be no collision</li>
<li>Find v which is dotProduct(displacement, n)</li>
<li>if v > 0 there will be no collision</li>
</ul>
<li>Check collisions with relevant line segments using circleWallCollision</li>
<ul>
<li>Calculate the vector equation</li>
<li>Find intersection time</li>
<li>Return t</li>
</ul>
<li>If that somehow didn't work, check collisions with the vertices using circlePointCollision</li>
<ul>
<li>Use pointCircleCollision</li>
</ul>
<li>We should have collision time in the console at this point.</li>
</ul>
<script>
	function rectangleCircleCollisionTime(c, r, v)
	{
		var A = r.center.add(r.u.add(r.v)); // Top right
		A.tag = "A";
		var B = r.center.add(r.u.add(r.v.mul(-1))); // Bottom right
		B.tag = "B";
		var C = r.center.add(r.u.add(r.v).mul(-1)); // Bottom left
		C.tag = "C";
		var D = r.center.add(r.u.add(r.v.mul(-1)).mul(-1)); // Top left
		D.tag = "D";
		var recPoints = [A, B, C, D];

		var t = -1;
		
		for (var i = 0; i < 4; ++i) // for each point
		{
			thisSegment = new Line(recPoints[i],new Vec(recPoints[i], recPoints[(i + 1) % 4])); // create a line segment
			if (t <= 0)
			{
				var thisTime = circleSegmentCollision(c, thisSegment, recPoints[i], recPoints[(i + 1) % 4], v); // find collision time between circle and line
				if (thisTime > t)
					t = thisTime;
			}
			else
				return t;
		}

		if (t == -1)
			t = Number.POSITIVE_INFINITY;
		
		return t;
	}

	var c = new Circle(new Point(0,0),1);
	var r = new Rectangle(new Point(0,5),new vec2d(5, 0), new vec2d(0, 0)); // SAME RECTANGLE AS ORIGINAL ASSIGNMENT USING NEW DEFINITION && CONSTRUCTOR
	var v = new vec2d(0,1);
	var t =  rectangleCircleCollisionTime(c,r,v);
	
	document.write(t); <!-- Expected result is 4 -->
	
	var v = new vec2d(1,-1);
	var t =  rectangleCircleCollisionTime(c,r,v);
	
	document.write(t); <!-- Expected result is Infinity -->
	
	var v = new vec2d(1,-1);
	var t =  rectangleCircleCollisionTime(new Circle(new Point(0,0),5),r,v);
	
	document.write(t); <!-- Expected result is 0 -->
</script>
</body>
</html>